<!doctype html>
<html  class="no-js" lang="">
<head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css" rel="stylesheet" type="text/css">
    <!--<script language="JavaScript" type="text/javascript" src="myjavascript.js"></script>-->

</head>
<body>

    <!--<nav class="navbar navbar-dark bg-primary">
      <form class="form-inline">
          <a class="bottone" href="#">Button 1</a>
          <a class="bottone" href="#">Button 2</a>
          <a class="bottone" href="#">Button 3</a>
      </form>
    </nav>-->
    <header>
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample08" aria-controls="navbarsExample08" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse justify-content-md-center" id="navbarsExample08">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="programmi.html">Tutti I Programmi<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="Indignato.html">Indignato<span class="sr-only">(current)</span></a>
                </li>
              <li class="nav-item">
                <a class="nav-link" href="Trash.html">Trash<span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item">
                <!--<a class="nav-link" href="#">Link</a>-->
                <a class="nav-link" href="Sportivo.html">Sportivo<span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item">
                <!--<a class="nav-link disabled" href="#">Disabled</a>-->
                <a class="nav-link" href="Famiglia.html">Famiglia<span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item dropdown active">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Emittente
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <a class="dropdown-item" href="Mediaset.html">Mediaset</a>
                  <a class="dropdown-item" href="Rai.html">Rai</a>
                </div>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Programmazione
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <a class="dropdown-item" href="Mattina.html">Mattina</a>
                  <a class="dropdown-item" href="Pomeriggio.html">Pomeriggio</a>
                  <a class="dropdown-item" href="Sera.html">Sera</a>
                  <a class="dropdown-item" href="Notte.html">Notte</a>
                  <a class="dropdown-item" href="week_end.html">Nel Weekend</a>
                  <a class="dropdown-item" href="settimana.html">In Settimana</a>
                </div>
              </li>
            </ul>
          </div>
      </nav>
      <div class="downnav">
        <!--<div style="padding-top: 10px;"class="container">
            <div class="row justify-content-md-center">
              <div class="col col-lg-2">
                  <p>Antonio Surdo</p>
              </div>
              <div class="col-md-auto refine">
                  <p>Ontologia dei Programmi.</p>
                  <p>Guida alla scelta del proprio Programma preferito.</p>
              </div>
              <div class="col col-lg-2">
                <p>Università degli studi di Torino.</p>
              </div>
            </div>
        </div>-->
        <div style="padding-top: 15px; padding-bottom: 15px;" class="container">
            <h5>AssisTV! Assistente virtuale per la televisione italiana </h5>
            <p>Applicazione client creata per il corso di Modellazione Concettuale per il Web Semantico. </p>
            <p>Dipartimento di Informatica - Università degli Studi di Torino - Mazzone Giuseppe e Parisi Matteo</p>
        </div>
    </div>
  </header>


    <div class="container">
        <div class="row justify-content-md-center">
          <div class="col col-lg-12">
          </div>
          <div style="background-color: white;">
            <table id="table" class="table table-striped" style="width:100%; margin-top:3em;">
              <tr id="head">
                <th id="ppp" cope="col" style="width:20%;">Canali</th>
                <th scope="col" >N°Programmi</th>

              </tr>
              <tr id="consoleName">

              </tr>
            </table>
          </div>
        </div>
    </div>

    <footer class="footer">
      <p>All Right Reserved.© 2018-2019 - Università degli Studi di Torino</p>
    </footer>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="modernizr-3.7.1.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-3.3.1.min.js"><\/script>')</script>
    <script src="plugins.js"></script>
    <!--<script src="./css/bootstrap.min.js.download"></script>-->

    <!-- Google Analytics: change UA-XXXXX-Y to be your site's ID. -->
    <script>
      window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
      ga('create', 'UA-XXXXX-Y', 'auto'); ga('set','transport','beacon'); ga('send', 'pageview')
    </script>
    <script src="https://www.google-analytics.com/analytics.js" async defer></script>
    <!-- Google Analytics: change UA-XXXXX-Y to be your site's ID. -->
    <script>
      window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
      ga('create', 'UA-XXXXX-Y', 'auto'); ga('set','transport','beacon'); ga('send', 'pageview')
    </script>
    <script src="https://www.google-analytics.com/analytics.js" async defer></script>


    <script>

    /**
     * Funzione che inzia la richiesta all'indirizzo dello SPARQL endpoint, specificato in riga 142.
     * Dopo aver specificato la query di richiesta dati, codifichiamo la richiesta in URI in formato URF-8 e effettuiamo la vera e propria richiesta ajax.
     * Dopo aver ottenuto i dati, li manipoliamo sull'html, in particolare su una tabella (162-168).
     * E' stato specificato un messaggio d'errore per verificare che tutto funzionasse correttamente e per facilitare lo sviluppo.

}


     **/
      $(document).ready(function () {

        var key = "dba";
        var url = "http://localhost:8890/sparql";
        var defGIRI= "http://localhost:8890/DAV/def2"
        var query = "select ?c (count(distinct ?p) as ?count)where {?c AssisTV:è_un_canale_di AssisTV:Rai. ?p AssisTV:è_trasmesso_su ?c.}"; //select ?p ?d ?b ?o ?m ?dr where {?p AssisTV:Descrizione ?d . ?p AssisTV:ha_visto_censura ?b.?p AssisTV:ha_ora ?o.?p AssisTV:ha_minuti ?m.?p AssisTV:ha_durata ?dr.}
        var queryUrl = encodeURI(url + "?default-graph-uri=" + defGIRI + "&query=" + query+ "&wskey="+ key + "&format=json");

        $.ajax({
          dataType: 'jsonp',
          url: queryUrl,
          method: 'GET',

          statusCode:{

          },
          success: function (dati) {

            var str = "";
            var table = $("#table");




            if(dati.head.vars){
              //alert("g"); ok
              $.each(dati.results.bindings, function(index, b){

                console.log(index);
                console.log(b);

                var row = $("<tr>").appendTo(table);
                row.append($("<td>", {text: b.c.value.slice(b.c.value.search("#") +1)}));
                row.append($("<td>", {text: b.count.value}));

              });

            }

          },
          error: function (xhr){
            alert ("Errore nell'estrazione dei dati: " + xhr.status + " " + xhr.statusText);
          }
        });
      });

    </script>


</body>
</html>
